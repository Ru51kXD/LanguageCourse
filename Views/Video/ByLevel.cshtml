@model IEnumerable<WebApplication15.Models.Video>
@using Microsoft.AspNetCore.Localization
@using System.Globalization
@{
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∫—É–ª—å—Ç—É—Ä—É
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var cultureTwoLetter = requestCulture?.RequestCulture.Culture.TwoLetterISOLanguageName ?? "ru";
    
    var language = ViewBag.Language as WebApplication15.Models.Language;
    var level = ViewBag.Level as WebApplication15.Models.LanguageLevel;
    
    var videoLessonsText = cultureTwoLetter switch
    {
        "ru" => "–í–∏–¥–µ–æ—É—Ä–æ–∫–∏",
        "kk" => "–ë–µ–π–Ω–µ—Å–∞–±–∞“õ—Ç–∞—Ä",
        "en" => "Video Lessons",
        "tr" => "Video Dersler",
        _ => "Video Lessons"
    };
    
    ViewData["Title"] = $"{videoLessonsText} - {language?.Name} - {level?.Name}";
    
    // –°–ª–æ–≤–∞—Ä—å —ç–º–æ–¥–∑–∏ —Ñ–ª–∞–≥–æ–≤ –¥–ª—è —è–∑—ã–∫–æ–≤
    var languageFlags = new Dictionary<string, string>
    {
        { "–ö–∞–∑–∞—Ö—Å–∫–∏–π", "üá∞üáø" },
        { "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π", "üá¨üáß" },
        { "–¢—É—Ä–µ—Ü–∫–∏–π", "üáπüá∑" },
        { "–†—É—Å—Å–∫–∏–π", "üá∑üá∫" },
        { "–ù–µ–º–µ—Ü–∫–∏–π", "üá©üá™" },
        { "–ò—Å–ø–∞–Ω—Å–∫–∏–π", "üá™üá∏" },
        { "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π", "üá´üá∑" },
        { "–ö–∏—Ç–∞–π—Å–∫–∏–π", "üá®üá≥" },
        { "–ê—Ä–∞–±—Å–∫–∏–π", "üá¶üá™" },
        { "–Ø–ø–æ–Ω—Å–∫–∏–π", "üáØüáµ" }
    };
}

<link rel="stylesheet" href="~/css/videos.css" asp-append-version="true" />

<div class="video-page-container">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <div class="breadcrumbs">
        <div class="container">
            <a href="@Url.Action("Index", "Home")">
                @{
                    var homeText = cultureTwoLetter switch
                    {
                        "ru" => "–ì–ª–∞–≤–Ω–∞—è",
                        "kk" => "–ë–∞—Å—Ç—ã –±–µ—Ç",
                        "en" => "Home",
                        "tr" => "Ana Sayfa",
                        _ => "Home"
                    };
                }
                @homeText
            </a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <a href="@Url.Action("Index", "Video")">
                @{
                    var videosText = cultureTwoLetter switch
                    {
                        "ru" => "–í–∏–¥–µ–æ—É—Ä–æ–∫–∏",
                        "kk" => "–ë–µ–π–Ω–µ—Å–∞–±–∞“õ—Ç–∞—Ä",
                        "en" => "Video Lessons",
                        "tr" => "Video Dersler",
                        _ => "Video Lessons"
                    };
                }
                @videosText
            </a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <a href="@Url.Action("Index", "Video", new { languageId = language?.Id ?? 0 })">@(language?.Name ?? "–Ø–∑—ã–∫")</a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <span class="current">@(level?.Name ?? "–£—Ä–æ–≤–µ–Ω—å")</span>
        </div>
    </div>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="video-header">
        <div class="container">
            <h1 class="page-title">
                @if (language != null && languageFlags.ContainsKey(language.Name))
                {
                    @languageFlags[language.Name] @language.Name
                }
                else if (language != null)
                {
                    @language.Name
                }
                else
                {
                    var languageText = cultureTwoLetter switch
                    {
                        "ru" => "–Ø–∑—ã–∫",
                        "kk" => "–¢—ñ–ª",
                        "en" => "Language",
                        "tr" => "Dil",
                        _ => "Language"
                    };
                    @languageText
                }
                - @(level?.Name ?? 
                    cultureTwoLetter switch
                    {
                        "ru" => "–£—Ä–æ–≤–µ–Ω—å",
                        "kk" => "–î–µ“£–≥–µ–π",
                        "en" => "Level",
                        "tr" => "Seviye",
                        _ => "Level"
                    }
                )
            </h1>
            <p class="page-description">
                @(level?.Description ?? 
                    cultureTwoLetter switch
                    {
                        "ru" => "–í–∏–¥–µ–æ—É—Ä–æ–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ",
                        "kk" => "–¢–∞“£–¥–∞–ª“ì–∞–Ω –¥–µ“£–≥–µ–π–¥–µ —Ç—ñ–ª–¥—ñ “Ø–π—Ä–µ–Ω—É–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –±–µ–π–Ω–µ—Å–∞–±–∞“õ—Ç–∞—Ä",
                        "en" => "Video lessons for language learning at the selected level",
                        "tr" => "Se√ßilen seviyede dil √∂ƒürenmek i√ßin video dersler",
                        _ => "Video lessons for language learning at the selected level"
                    }
                )
            </p>
        </div>
    </div>

    <div class="container">
        <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º -->
        @if (ViewBag.Levels != null)
        {
            <div class="filters-container">
                <div class="filter-group">
                    <div class="filter-label">
                        <i class="fas fa-layer-group"></i> 
                        @{
                            var chooseLevelText = cultureTwoLetter switch
                            {
                                "ru" => "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å",
                                "kk" => "–î–µ“£–≥–µ–π–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑",
                                "en" => "Choose a level",
                                "tr" => "Bir seviye se√ßin",
                                _ => "Choose a level"
                            };
                        }
                        @chooseLevelText
                    </div>
                    <div class="filter-options">
                        @foreach (var lvl in ViewBag.Levels as List<WebApplication15.Models.LanguageLevel>)
                        {
                            <a href="@Url.Action("ByLevel", new { languageId = language?.Id ?? 0, levelName = lvl.Name })" 
                               class="filter-option @(level != null && level.Id == lvl.Id ? "active" : "")">
                                @lvl.Name - @lvl.Description
                            </a>
                        }
                    </div>
                </div>
                
                <div class="filter-actions">
                    <a href="@Url.Action("Index", "Video")" class="reset-filters">
                        <i class="fas fa-redo-alt"></i> 
                        @{
                            var returnToAllVideosText = cultureTwoLetter switch
                            {
                                "ru" => "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –≤—Å–µ—Ö –≤–∏–¥–µ–æ",
                                "kk" => "–ë–∞—Ä–ª—ã“õ –±–µ–π–Ω–µ–ª–µ—Ä —Ç—ñ–∑—ñ–º—ñ–Ω–µ –æ—Ä–∞–ª—É",
                                "en" => "Return to all videos list",
                                "tr" => "T√ºm videolar listesine d√∂n",
                                _ => "Return to all videos list"
                            };
                        }
                        @returnToAllVideosText
                    </a>
                </div>
            </div>
        }

        <!-- –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ -->
        <div class="language-section" id="level-videos-section">
            <div class="videos-grid">
                @if (Model != null && Model.Any())
                {
                    foreach (var video in Model)
                    {
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <img src="~/images/videos/@(video.Id).jpg" onerror="this.src='/images/videos/default.jpg'" alt="@video.Title">
                                <div class="play-button">
                                    <i class="fas fa-play"></i>
                                </div>
                                <div class="video-level">
                                    @(video.LanguageLevel?.Name ?? 
                                        cultureTwoLetter switch
                                        {
                                            "ru" => "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å",
                                            "kk" => "–ë–µ–ª–≥—ñ—Å—ñ–∑ –¥–µ“£–≥–µ–π",
                                            "en" => "Unknown level",
                                            "tr" => "Bilinmeyen seviye",
                                            _ => "Unknown level"
                                        }
                                    )
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">@video.Title</h3>
                                <p class="video-description">@video.Description</p>
                                <a href="@Url.Action("Details", "Video", new { id = video.Id })" class="watch-button">
                                    @{
                                        var watchVideoText = cultureTwoLetter switch
                                        {
                                            "ru" => "–°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ",
                                            "kk" => "–ë–µ–π–Ω–µ–Ω—ñ “õ–∞—Ä–∞—É",
                                            "en" => "Watch video",
                                            "tr" => "Videoyu izle",
                                            _ => "Watch video"
                                        };
                                    }
                                    @watchVideoText <i class="fas fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="no-videos">
                        <i class="fas fa-video-slash fa-3x mb-3"></i>
                        <h3>
                            @{
                                var noVideosFoundText = cultureTwoLetter switch
                                {
                                    "ru" => "–í–∏–¥–µ–æ—É—Ä–æ–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",
                                    "kk" => "–ë–µ–π–Ω–µ—Å–∞–±–∞“õ—Ç–∞—Ä —Ç–∞–±—ã–ª–º–∞–¥—ã",
                                    "en" => "No video lessons found",
                                    "tr" => "Video ders bulunamadƒ±",
                                    _ => "No video lessons found"
                                };
                            }
                            @noVideosFoundText
                        </h3>
                        <p>
                            @{
                                var noVideosForLevelText = cultureTwoLetter switch
                                {
                                    "ru" => "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ–∫–∞ –Ω–µ—Ç –≤–∏–¥–µ–æ—É—Ä–æ–∫–æ–≤.",
                                    "kk" => "”®–∫—ñ–Ω—ñ—à–∫–µ –æ—Ä–∞–π, —Ç–∞“£–¥–∞–ª“ì–∞–Ω –¥–µ“£–≥–µ–π “Ø—à—ñ–Ω ”ô–∑—ñ—Ä–≥–µ –±–µ–π–Ω–µ—Å–∞–±–∞“õ—Ç–∞—Ä –∂–æ“õ.",
                                    "en" => "Unfortunately, there are no video lessons for the selected level yet.",
                                    "tr" => "Ne yazƒ±k ki, se√ßilen seviye i√ßin hen√ºz video ders bulunmamaktadƒ±r.",
                                    _ => "Unfortunately, there are no video lessons for the selected level yet."
                                };
                            }
                            @noVideosForLevelText
                        </p>
                        <a href="@Url.Action("Index", "Video")" class="btn-reset">
                            @{
                                var returnToAllVideosText = cultureTwoLetter switch
                                {
                                    "ru" => "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –≤—Å–µ—Ö –≤–∏–¥–µ–æ",
                                    "kk" => "–ë–∞—Ä–ª—ã“õ –±–µ–π–Ω–µ–ª–µ—Ä —Ç—ñ–∑—ñ–º—ñ–Ω–µ –æ—Ä–∞–ª—É",
                                    "en" => "Return to all videos list",
                                    "tr" => "T√ºm videolar listesine d√∂n",
                                    _ => "Return to all videos list"
                                };
                            }
                            @returnToAllVideosText
                        </a>
                    </div>
                }
            </div>
        </div>
        
        <!-- CTA —Å–µ–∫—Ü–∏—è -->
        <div class="cta-section">
            <div class="container">
                <div class="cta-container">
                    <div class="cta-content">
                        <h2>
                            @{
                                var wantLearnMoreEffectiveText = cultureTwoLetter switch
                                {
                                    "ru" => $"–•–æ—Ç–∏—Ç–µ –∏–∑—É—á–∞—Ç—å {language?.Name ?? "—è–∑—ã–∫"} —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ?",
                                    "kk" => $"{language?.Name ?? "—Ç—ñ–ª–¥—ñ"} —Ç–∏—ñ–º–¥—ñ—Ä–µ–∫ “Ø–π—Ä–µ–Ω–≥—ñ“£—ñ–∑ –∫–µ–ª–µ –º–µ?",
                                    "en" => $"Want to learn {language?.Name ?? "language"} more effectively?",
                                    "tr" => $"{language?.Name ?? "dil"}'ƒ± daha etkili √∂ƒürenmek ister misiniz?",
                                    _ => $"Want to learn {language?.Name ?? "language"} more effectively?"
                                };
                            }
                            @wantLearnMoreEffectiveText
                        </h2>
                        <p>
                            @{
                                var takeLevelTestText = cultureTwoLetter switch
                                {
                                    "ru" => $"–ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç—ã –Ω–∞ —É—Ä–æ–≤–µ–Ω—å {level?.Name ?? "—è–∑—ã–∫–∞"}, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è.",
                                    "kk" => $"–ë—ñ–ª—ñ–º –¥–µ“£–≥–µ–π—ñ“£—ñ–∑–¥—ñ —Ç–µ–∫—Å–µ—Ä—É –∂”ô–Ω–µ –æ–¥–∞–Ω ”ô—Ä—ñ –æ“õ—É –±–æ–π—ã–Ω—à–∞ “±—Å—ã–Ω—ã—Å—Ç–∞—Ä –∞–ª—É “Ø—à—ñ–Ω {level?.Name ?? "—Ç—ñ–ª"} –¥–µ“£–≥–µ–π—ñ–Ω–µ —Ç–µ—Å—Ç—Ç–µ—Ä–¥–µ–Ω ”©—Ç—ñ“£—ñ–∑.",
                                    "en" => $"Take tests for {level?.Name ?? "language"} level to check your knowledge and get recommendations for further learning.",
                                    "tr" => $"Bilginizi kontrol etmek ve daha fazla √∂ƒürenme i√ßin √∂neriler almak i√ßin {level?.Name ?? "dil"} seviyesi testlerine katƒ±lƒ±n.",
                                    _ => $"Take tests for {level?.Name ?? "language"} level to check your knowledge and get recommendations for further learning."
                                };
                            }
                            @takeLevelTestText
                        </p>
                        <div class="cta-buttons">
                            <a href="@Url.Action("Tests", "Language", new { id = language?.Id ?? 0 })" class="btn-primary">
                                @{
                                    var takeTestText = cultureTwoLetter switch
                                    {
                                        "ru" => "–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç",
                                        "kk" => "–¢–µ—Å—Ç —Ç–∞–ø—Å—ã—Ä—É",
                                        "en" => "Take a test",
                                        "tr" => "Test yap",
                                        _ => "Take a test"
                                    };
                                }
                                @takeTestText
                            </a>
                            <a href="@Url.Action("Index", "Home")" class="btn-secondary">
                                @{
                                    var learnMoreText = cultureTwoLetter switch
                                    {
                                        "ru" => "–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ",
                                        "kk" => "–¢–æ–ª—ã“ì—ã—Ä–∞“õ –±—ñ–ª—É",
                                        "en" => "Learn more",
                                        "tr" => "Daha fazla bilgi",
                                        _ => "Learn more"
                                    };
                                }
                                @learnMoreText
                            </a>
                        </div>
                    </div>
                    <div class="cta-image">
                        <img src="~/images/test-illustration.svg" alt="@takeTestText" onerror="this.src='/images/cta-default.jpg'">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // –ê–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å–µ–∫—Ü–∏–π
            document.querySelectorAll('.language-section').forEach(section => {
                observer.observe(section);
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤–∏–¥–µ–æ
            document.querySelectorAll('.video-card').forEach((card, index) => {
                card.style.transitionDelay = `${index * 0.1}s`;
                observer.observe(card);
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è CTA —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.cta-container').forEach(cta => {
                observer.observe(cta);
            });
        });
    </script>
} 