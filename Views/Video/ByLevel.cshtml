@model IEnumerable<WebApplication15.Models.Video>
@{
    var language = ViewBag.Language as WebApplication15.Models.Language;
    var level = ViewBag.Level as WebApplication15.Models.LanguageLevel;
    
    ViewData["Title"] = $"–í–∏–¥–µ–æ—É—Ä–æ–∫–∏ - {language?.Name} - {level?.Name}";
    
    // –°–ª–æ–≤–∞—Ä—å —ç–º–æ–¥–∑–∏ —Ñ–ª–∞–≥–æ–≤ –¥–ª—è —è–∑—ã–∫–æ–≤
    var languageFlags = new Dictionary<string, string>
    {
        { "–ö–∞–∑–∞—Ö—Å–∫–∏–π", "üá∞üáø" },
        { "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π", "üá¨üáß" },
        { "–¢—É—Ä–µ—Ü–∫–∏–π", "üáπüá∑" },
        { "–†—É—Å—Å–∫–∏–π", "üá∑üá∫" },
        { "–ù–µ–º–µ—Ü–∫–∏–π", "üá©üá™" },
        { "–ò—Å–ø–∞–Ω—Å–∫–∏–π", "üá™üá∏" },
        { "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π", "üá´üá∑" },
        { "–ö–∏—Ç–∞–π—Å–∫–∏–π", "üá®üá≥" },
        { "–ê—Ä–∞–±—Å–∫–∏–π", "üá¶üá™" },
        { "–Ø–ø–æ–Ω—Å–∫–∏–π", "üáØüáµ" }
    };
}

<link rel="stylesheet" href="~/css/videos.css" asp-append-version="true" />

<div class="video-page-container">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <div class="breadcrumbs">
        <div class="container">
            <a href="@Url.Action("Index", "Home")">–ì–ª–∞–≤–Ω–∞—è</a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <a href="@Url.Action("Index", "Video")">–í–∏–¥–µ–æ—É—Ä–æ–∫–∏</a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <a href="@Url.Action("Index", "Video", new { languageId = language?.Id ?? 0 })">@(language?.Name ?? "–Ø–∑—ã–∫")</a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <span class="current">@(level?.Name ?? "–£—Ä–æ–≤–µ–Ω—å")</span>
        </div>
    </div>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="video-header">
        <div class="container">
            <h1 class="page-title">
                @if (language != null && languageFlags.ContainsKey(language.Name))
                {
                    @languageFlags[language.Name] @language.Name
                }
                else if (language != null)
                {
                    @language.Name
                }
                else
                {
                    <text>–Ø–∑—ã–∫</text>
                }
                - @(level?.Name ?? "–£—Ä–æ–≤–µ–Ω—å")
            </h1>
            <p class="page-description">@(level?.Description ?? "–í–∏–¥–µ–æ—É—Ä–æ–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ")</p>
        </div>
    </div>

    <div class="container">
        <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º -->
        @if (ViewBag.Levels != null)
        {
            <div class="filters-container">
                <div class="filter-group">
                    <div class="filter-label">
                        <i class="fas fa-layer-group"></i> –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å
                    </div>
                    <div class="filter-options">
                        @foreach (var lvl in ViewBag.Levels as List<WebApplication15.Models.LanguageLevel>)
                        {
                            <a href="@Url.Action("ByLevel", new { languageId = language?.Id ?? 0, levelName = lvl.Name })" 
                               class="filter-option @(level != null && level.Id == lvl.Id ? "active" : "")">
                                @lvl.Name - @lvl.Description
                            </a>
                        }
                    </div>
                </div>
                
                <div class="filter-actions">
                    <a href="@Url.Action("Index", "Video")" class="reset-filters">
                        <i class="fas fa-redo-alt"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –≤—Å–µ—Ö –≤–∏–¥–µ–æ
                    </a>
                </div>
            </div>
        }

        <!-- –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ -->
        <div class="language-section" id="level-videos-section">
            <div class="videos-grid">
                @if (Model != null && Model.Any())
                {
                    foreach (var video in Model)
                    {
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <img src="~/images/videos/@(video.Id).jpg" onerror="this.src='/images/videos/default.jpg'" alt="@video.Title">
                                <div class="play-button">
                                    <i class="fas fa-play"></i>
                                </div>
                                <div class="video-level">@(video.LanguageLevel?.Name ?? "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å")</div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">@video.Title</h3>
                                <p class="video-description">@video.Description</p>
                                <a href="@Url.Action("Details", "Video", new { id = video.Id })" class="watch-button">
                                    –°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ <i class="fas fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="no-videos">
                        <i class="fas fa-video-slash fa-3x mb-3"></i>
                        <h3>–í–∏–¥–µ–æ—É—Ä–æ–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ–∫–∞ –Ω–µ—Ç –≤–∏–¥–µ–æ—É—Ä–æ–∫–æ–≤.</p>
                        <a href="@Url.Action("Index", "Video")" class="btn-reset">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –≤—Å–µ—Ö –≤–∏–¥–µ–æ</a>
                    </div>
                }
            </div>
        </div>
        
        <!-- CTA —Å–µ–∫—Ü–∏—è -->
        <div class="cta-section">
            <div class="container">
                <div class="cta-container">
                    <div class="cta-content">
                        <h2>–•–æ—Ç–∏—Ç–µ –∏–∑—É—á–∞—Ç—å @(language?.Name ?? "—è–∑—ã–∫") —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ?</h2>
                        <p>–ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç—ã –Ω–∞ —É—Ä–æ–≤–µ–Ω—å @(level?.Name ?? "—è–∑—ã–∫–∞"), —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è.</p>
                        <div class="cta-buttons">
                            <a href="@Url.Action("Tests", "Language", new { id = language?.Id ?? 0 })" class="btn-primary">–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</a>
                            <a href="@Url.Action("Index", "Home")" class="btn-secondary">–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ</a>
                        </div>
                    </div>
                    <div class="cta-image">
                        <img src="~/images/test-illustration.svg" alt="–¢–µ—Å—Ç—ã –Ω–∞ –∑–Ω–∞–Ω–∏–µ —è–∑—ã–∫–∞" onerror="this.src='/images/cta-default.jpg'">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // –ê–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å–µ–∫—Ü–∏–π
            document.querySelectorAll('.language-section').forEach(section => {
                observer.observe(section);
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤–∏–¥–µ–æ
            document.querySelectorAll('.video-card').forEach((card, index) => {
                card.style.transitionDelay = `${index * 0.1}s`;
                observer.observe(card);
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è CTA —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.cta-container').forEach(cta => {
                observer.observe(cta);
            });
        });
    </script>
} 